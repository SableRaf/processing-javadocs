<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>TokenMarkerState</title>
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TokenMarkerState";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../processing/app/syntax/TokenMarker.TokenListener.html" title="interface in processing.app.syntax"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?processing/app/syntax/TokenMarkerState.html" target="_top">Frames</a></li>
<li><a href="TokenMarkerState.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">processing.app.syntax</div>
<h2 title="Class TokenMarkerState" class="title">Class TokenMarkerState</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>Object</li>
<li>
<ul class="inheritance">
<li>TokenMarkerState</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">TokenMarkerState</span>
extends Object</pre>
<div class="block">This class serves only as a workaround to preserve API and should be removed
 in the next major version. Base TokenMarker which serves as superclass for
 token markes for various modes is stateful, but single instance was shared
 between all tabs and Editors. This caused inherent bugs by leaking state
 between contexts.

 TokenMarker subclasses now serve two purposes: they keep keyword list and
 they override markTokensImpl to provide the marking logic.

 Since each tab and Editor should have it's own token marker state, I extracted
 most of the fields and associated metods working with them from TokenMarker
 into this class, and allowed TokenMarker to create instances of this class
 when requested.

 The way marking logic is handled is unfortunate, since markTokensImpl is
 expected to call addToken() of TokenMarker superclass instead of â€“ for
 example - returning a List of tokens. I worked around this by plugging in
 TokenMarkerState instance as listener before markTokensImpl is called.
 This behavior is safe since TokenMarker is always operated from Event
 Dispatch Thread and no multithreading is involved.

 This allows having only single instance of TokenMarker in a way it was
 intended before while keeping state separate for each tab.

 In the next major version TokenMarker shound be redesigned with following
 requirements in mind:
 - Single instance of keyword list and other common data, initialized by Mode
 - Each tab should have its own instance of TokenMarker containing its state
 - Support multiple flavors for different doc types
 - Other modes should provide logic in a way which is compatible with
     multiple states (pure function? Function object?).
     Currently state, logic and keywords list are tied together into one
     TokenMarker instance, which leads to need for this workaround.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../processing/app/syntax/TokenMarkerState.html#deleteLines-int-int-">deleteLines</a></span>(int&nbsp;index,
           int&nbsp;lines)</code>
<div class="block">Informs the token marker that line have been deleted from
 the document.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../processing/app/syntax/TokenMarkerState.html#getLineCount--">getLineCount</a></span>()</code>
<div class="block">Returns the number of lines in this token marker.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../processing/app/syntax/TokenMarkerState.html#insertLines-int-int-">insertLines</a></span>(int&nbsp;index,
           int&nbsp;lines)</code>
<div class="block">Informs the token marker that lines have been inserted into
 the document.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../processing/app/syntax/TokenMarkerState.html#isNextLineRequested--">isNextLineRequested</a></span>()</code>
<div class="block">Returns true if the next line should be repainted.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../processing/app/syntax/Token.html" title="class in processing.app.syntax">Token</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../processing/app/syntax/TokenMarkerState.html#markTokens-javax.swing.text.Segment-int-">markTokens</a></span>(Segment&nbsp;line,
          int&nbsp;lineIndex)</code>
<div class="block">A wrapper for the lower-level <code>markTokensImpl</code> method
 that is called to split a line up into tokens.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="markTokens-javax.swing.text.Segment-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markTokens</h4>
<pre>public&nbsp;<a href="../../../processing/app/syntax/Token.html" title="class in processing.app.syntax">Token</a>&nbsp;markTokens(Segment&nbsp;line,
                        int&nbsp;lineIndex)</pre>
<div class="block">A wrapper for the lower-level <code>markTokensImpl</code> method
 that is called to split a line up into tokens.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>line</code> - The line</dd>
<dd><code>lineIndex</code> - The line number</dd>
</dl>
</li>
</ul>
<a name="insertLines-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertLines</h4>
<pre>public&nbsp;void&nbsp;insertLines(int&nbsp;index,
                        int&nbsp;lines)</pre>
<div class="block">Informs the token marker that lines have been inserted into
 the document. This inserts a gap in the <code>lineInfo</code>
 array.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>index</code> - The first line number</dd>
<dd><code>lines</code> - The number of lines</dd>
</dl>
</li>
</ul>
<a name="deleteLines-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteLines</h4>
<pre>public&nbsp;void&nbsp;deleteLines(int&nbsp;index,
                        int&nbsp;lines)</pre>
<div class="block">Informs the token marker that line have been deleted from
 the document. This removes the lines in question from the
 <code>lineInfo</code> array.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>index</code> - The first line number</dd>
<dd><code>lines</code> - The number of lines</dd>
</dl>
</li>
</ul>
<a name="getLineCount--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLineCount</h4>
<pre>public&nbsp;int&nbsp;getLineCount()</pre>
<div class="block">Returns the number of lines in this token marker.</div>
</li>
</ul>
<a name="isNextLineRequested--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isNextLineRequested</h4>
<pre>public&nbsp;boolean&nbsp;isNextLineRequested()</pre>
<div class="block">Returns true if the next line should be repainted. This
 will return true after a line has been tokenized that starts
 a multiline token that continues onto the next line.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../processing/app/syntax/TokenMarker.TokenListener.html" title="interface in processing.app.syntax"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?processing/app/syntax/TokenMarkerState.html" target="_top">Frames</a></li>
<li><a href="TokenMarkerState.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
